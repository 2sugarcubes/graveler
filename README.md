# Graveler-rs

My entry into the [ShoddyCast Graveler Softlock Challenge](https://www.youtube.com/watch?v=M8C8dHQE2Ro).

## Getting started

1. Download this repository `git clone github.com/2sugarcubes/graveler`
2. Download [rust](https://www.rust-lang.org/tools/install)
3. Run `make` or `RUSTFLAGS="-C target-cpu=native" cargo build --release`
4. Run `time target/release/graveler` or you may need to do [some powershell magic](https://superuser.com/questions/228056/windows-equivalent-to-unix-time-command) on Windows
5. You are done :)
6. if you want to do more (This didn't do any good for me with my laptop) you can try [PGO](https://github.com/Kobzol/cargo-pgo)

## FAQ

### What is so good about this implementation

Here is a short list of the potentially unique features that I have implemented in this solution.

1. Multiplexing random games.
   - This allows us to generate sixty-four games approximately as quickly as generating two games.
2. A divide and conquer algorithm for generating random numbers
   - This allows the program to generate 619,728 random numbers that effectively act as 1,000,000,000 random games.

Some of the more canonical optimisations made include:

1. Multithreading.
2. CPU specific instructions.
3. Link time Optimisation.
4. Release target.

For a more in-depth description of features in this project, consider reading my [write up](https://2sugarcubes.github.io/projects/2024/09/09/graveler.html) about it on [my website](https://2sugarcubes.github.io).

### Why can't I just download an executable

This entry requires specific CPU instructions specific to the CPU on the user's computer, as such an executable generated by me is not likely to work for you, or will not be as fast as it could be if you compiled it on your computer.

### How fast is it?

I got it down to 0.31 seconds on my admittedly weak laptop with all other processes closed and power-save switched off.

The current iteration should benefit greatly from more cores, though that will require editing some code to limit how much it overshoots the target.

#### What did you run it on?

- Model
  - Inspiron 14 7420 2-in-1
- CPU
  - 12th Gen i7-1255U (12 threads)
- Memory
  - 16GB DDR4, 3200 MHz
- OS
  - Arch Linux, Kernel: 6.10.4-arch2-1

## I think I found a speed increase

That's great, first verify with the command `make time` before and after your change, then feel free to submit a [pull request](https://github.com/2sugarcubes/graveler/pulls), or submit [an issue](https://github.com/2sugarcubes/graveler/issues/new) if you need some help with that.
